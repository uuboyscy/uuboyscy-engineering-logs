"use strict";(self.webpackChunkuuboyscy_engineering_logs=self.webpackChunkuuboyscy_engineering_logs||[]).push([[1819],{65314:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Web Crawler/Web Crawler for Static Web Page","title":"Web Crawler for Static Web Page","description":"What to Do","source":"@site/docs/Web Crawler/06_Web Crawler for Static Web Page.md","sourceDirName":"Web Crawler","slug":"/Web Crawler/Web Crawler for Static Web Page","permalink":"/zh-Hant/docs/Web Crawler/Web Crawler for Static Web Page","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Web Crawler Implementation","permalink":"/zh-Hant/docs/Web Crawler/Web Crawler Implementation"},"next":{"title":"Web Crawler with browser_cookie3","permalink":"/zh-Hant/docs/Web Crawler/Web Crawler with browser_cookie3"}}');var r=s(74848),i=s(28453);const l={},a="Web Crawler for Static Web Page",c={},d=[{value:"What to Do",id:"what-to-do",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Install requests and BeatifulSoup",id:"install-requests-and-beatifulsoup",level:3},{value:"Usage of requests and BeautifulSoup",id:"usage-of-requests-and-beautifulsoup",level:3},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Crawl Article titles and Other Information",id:"crawl-article-titles-and-other-information",level:3},{value:"Crawl Multiple Page and Save Data",id:"crawl-multiple-page-and-save-data",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"web-crawler-for-static-web-page",children:"Web Crawler for Static Web Page"})}),"\n",(0,r.jsx)(n.h2,{id:"what-to-do",children:"What to Do"}),"\n",(0,r.jsx)(n.p,{children:"For this example, we'll create a web crawler to scrape articles from PTT's Gossiping board. Here are the key steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Prepare Headers and Cookies"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.img,{alt:"headers_user_agent",src:s(12873).A+"",width:"1546",height:"108"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.img,{alt:"cookies",src:s(6938).A+"",width:"672",height:"78"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"headers = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36'\n}\ncookies = {\n    'over18': '1'\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use BeautifulSoup to Parse HTML Content"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Article titles"}),"\n",(0,r.jsx)(n.li,{children:"Authors"}),"\n",(0,r.jsx)(n.li,{children:"Dates"}),"\n",(0,r.jsx)(n.li,{children:"Links"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Crawl Multiple Page and Save Data"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"install-requests-and-beatifulsoup",children:"Install requests and BeatifulSoup"}),"\n",(0,r.jsx)(n.p,{children:"To install the required libraries, follow these steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Open your terminal or command prompt"}),"\n",(0,r.jsxs)(n.li,{children:["Run the following command to install requests:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pip install requests bs4\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Or you can use other package management tools:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Using Poetry"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"poetry add requests bs4\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Using Pipenv"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pipenv install requests bs4\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Verify the installation:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'python -c "import requests; print(requests.__version__)"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The requests library will be used to send HTTP requests and handle responses from web servers."}),"\n",(0,r.jsx)(n.h3,{id:"usage-of-requests-and-beautifulsoup",children:"Usage of requests and BeautifulSoup"}),"\n",(0,r.jsx)(n.p,{children:"The main libraries used are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"requests"}),": Handles HTTP requests and responses"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sends GET/POST requests"}),"\n",(0,r.jsx)(n.li,{children:"Manages headers and cookies"}),"\n",(0,r.jsx)(n.li,{children:"Handles response status codes"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BeautifulSoup"}),": Parses HTML content"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Extracts data using selectors"}),"\n",(0,r.jsx)(n.li,{children:"Navigates HTML structure"}),"\n",(0,r.jsx)(n.li,{children:"Cleans and formats text"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["requests functions","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"requests.get(url, headers=None, cookies=None)"})}),"\n",(0,r.jsx)(n.li,{children:"Sends a GET request to the specified URL"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"requests.post(url, data=None, json=None)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sends a POST request with form data or JSON"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["BeautifulSoup functions","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'BeautifulSoup(html, "html.parser")'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creates a BeautifulSoup object to parse HTML"}),"\n",(0,r.jsx)(n.li,{children:"\u2192 Use it to process the HTML content returned from requests.get()"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"soup.select(css_selector)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Finds all elements matching a CSS selector"}),"\n",(0,r.jsx)(n.li,{children:"\u2192 Returns a list of tag (even if it has one result)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"soup.find_all(tag, attrs={})"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Finds all elements matching the tag and attributes"}),"\n",(0,r.jsx)(n.li,{children:"\u2192 Returns a list of tag (even if it has one result)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"crawl-article-titles-and-other-information",children:"Crawl Article titles and Other Information"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from bs4 import BeautifulSoup\nimport requests\n\nurl = "https://www.ptt.cc/bbs/Gossiping/index.html"\nres = requests.get(url, headers=headers, cookies=cookies)\nsoup = BeautifulSoup(res.text, "html.parser")\n\narticles = soup.select("div.r-ent")\n\nfor article in articles:\n    title_tag = article.select_one("div.title a")\n    author = article.select_one("div.meta div.author")\n    date = article.select_one("div.meta div.date")\n    \n    if title_tag:\n        print("Title:", title_tag.text)\n        print("Link:", "https://www.ptt.cc" + title_tag["href"])\n        print("Author:", author.text if author else "N/A")\n        print("Date:", date.text if date else "N/A")\n        print("-" * 40)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"crawl-multiple-page-and-save-data",children:"Crawl Multiple Page and Save Data"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Find link\n",(0,r.jsx)(n.img,{alt:"previous_page_1",src:s(22912).A+"",width:"1828",height:"994"})]}),"\n",(0,r.jsxs)(n.li,{children:["Find URL pattern\n",(0,r.jsx)(n.img,{alt:"previous_page_2",src:s(77947).A+"",width:"1440",height:"128"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},6938:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cookies-3e0e909b4af4d051bb4fc90ed3ab9124.png"},12873:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/headers_user_agent-496b3628273c507cf2d2f2d5391d5330.png"},22912:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/previous_page_1-1bd33a8c9fba27ce108dca77be070904.png"},77947:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/previous_page_2-cca5d97d0dc82c958903f480e3f2bacf.png"},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(96540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);