"use strict";(self.webpackChunkuuboyscy_engineering_logs=self.webpackChunkuuboyscy_engineering_logs||[]).push([[6883],{49426:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>n,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Web Crawler/Web Crawler with browser_cookie3","title":"Web Crawler with browser_cookie3","description":"This guide demonstrates how to use browser_cookie3 to retrieve cookies from your browser and use them in a web crawler to access the PTT Gossiping board, which requires a over18=1 cookie to bypass the age restriction prompt.","source":"@site/docs/Web Crawler/07_Web Crawler with browser_cookie3.md","sourceDirName":"Web Crawler","slug":"/Web Crawler/Web Crawler with browser_cookie3","permalink":"/zh-Hant/docs/Web Crawler/Web Crawler with browser_cookie3","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Web Crawler for Static Web Page","permalink":"/zh-Hant/docs/Web Crawler/Web Crawler for Static Web Page"}}');var i=o(74848),t=o(28453);const n={},c="Web Crawler with browser_cookie3",a={},l=[{value:"\ud83d\udd27 Requirements",id:"-requirements",level:2},{value:"\ud83d\udd0d What is <code>browser_cookie3</code>?",id:"-what-is-browser_cookie3",level:2},{value:"\ud83d\udcc1 Sample Crawler Code",id:"-sample-crawler-code",level:2},{value:"\ud83d\udca1 Notes",id:"-notes",level:2}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"web-crawler-with-browser_cookie3",children:"Web Crawler with browser_cookie3"})}),"\n",(0,i.jsxs)(r.h1,{id:"web-crawler-with-browser_cookie3--ptt-gossiping-example",children:["Web Crawler with ",(0,i.jsx)(r.code,{children:"browser_cookie3"})," \u2014 PTT Gossiping Example"]}),"\n",(0,i.jsxs)(r.p,{children:["This guide demonstrates how to use ",(0,i.jsx)(r.a,{href:"https://pypi.org/project/browser-cookie3/",children:(0,i.jsx)(r.code,{children:"browser_cookie3"})})," to retrieve cookies from your browser and use them in a web crawler to access the ",(0,i.jsx)(r.a,{href:"https://www.ptt.cc/bbs/Gossiping/index.html",children:"PTT Gossiping board"}),", which requires a ",(0,i.jsx)(r.code,{children:"over18=1"})," cookie to bypass the age restriction prompt."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-requirements",children:"\ud83d\udd27 Requirements"}),"\n",(0,i.jsx)(r.p,{children:"Install the required libraries:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"pip install requests beautifulsoup4 browser-cookie3\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsxs)(r.h2,{id:"-what-is-browser_cookie3",children:["\ud83d\udd0d What is ",(0,i.jsx)(r.code,{children:"browser_cookie3"}),"?"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"browser_cookie3"})," is a Python library that allows you to programmatically access cookies stored by your browser (Chrome, Firefox, etc.). It can be useful when accessing websites that require session or consent cookies."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-sample-crawler-code",children:"\ud83d\udcc1 Sample Crawler Code"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import requests\nimport browser_cookie3\nfrom bs4 import BeautifulSoup\n\ndef _fetch_cookies_from_browser() -> dict[str, str]:\n    """Fetches PTT cookies (like over18=1) from your Chrome browser."""\n    cookie_jar = browser_cookie3.chrome(domain_name="ptt.cc")\n    local_cookie_dict = requests.utils.dict_from_cookiejar(cookie_jar)\n\n    # Confirming if the essential cookie exists\n    cookies = {\n        "over18": local_cookie_dict.get("over18", "1")\n    }\n\n    print("[Fetched Cookies]", cookies)\n    return cookies\n\ndef crawl_ptt_gossiping():\n    url = "https://www.ptt.cc/bbs/Gossiping/index.html"\n    cookies = _fetch_cookies_from_browser()\n    headers = {\n        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"\n    }\n\n    response = requests.get(url, headers=headers, cookies=cookies)\n    if response.status_code != 200:\n        print(f"Failed to retrieve page, status: {response.status_code}")\n        return\n\n    soup = BeautifulSoup(response.text, "html.parser")\n    articles = soup.select("div.title a")\n\n    print("\\n\ud83d\udd25 Latest Posts on PTT Gossiping:")\n    for article in articles:\n        print(f"- {article.text.strip()} ({article[\'href\']})")\n\nif __name__ == "__main__":\n    crawl_ptt_gossiping()\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"-notes",children:"\ud83d\udca1 Notes"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:['If you\u2019ve never visited PTT Gossiping before, make sure to open the page once in Chrome and click "\u6211\u540c\u610f\uff0c\u6211\u5df2\u5e74\u6eff\u5341\u516b\u6b72" to set the ',(0,i.jsx)(r.code,{children:"over18=1"})," cookie."]}),"\n",(0,i.jsx)(r.li,{children:"You can extend this crawler to scrape post content, authors, dates, or write the data into a CSV/DB."}),"\n"]})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,r,o)=>{o.d(r,{R:()=>n,x:()=>c});var s=o(96540);const i={},t=s.createContext(i);function n(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);